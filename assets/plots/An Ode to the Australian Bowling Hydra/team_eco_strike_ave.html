<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bowler Radar Chart</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      overflow-y: hidden; /* ✅ prevents vertical scroll */
      background-color: #f4f4f4;
    }
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      text-align: center;
    }
    canvas {
      background: #ffffff;
      border-radius: 15px;
      padding: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
      margin: 0 auto;
      display: block;
      max-width: 500px;
      height: auto !important;
    }
    p {
      text-align: center;
      font-size: 14px;
      color: #555;
      margin: 2px auto 0;
      max-width: 90%;
    }
  </style>
</head>
<body>
  <canvas id="radarChart" width="500" height="500"></canvas>
  <p>
    Opposition-relative strike rate is the difference in the rate in which a team loses wickets and takes wickets. 
    Similarly, opposition-relative economy and average is the difference in the economy rates and the average of 
    the opposition compared to the economy and average of the team. The two Australian women teams outshine all teams 
    from history in terms of opposition-relative economy rates.
  </p>

  <script>
    const bowlers = [
      '2022–2025 (women) Australia',
      '2017–2022 (women) Australia',
      '2015–2019 England',
      '2022–2025 (women) England',
      '2019–2023 India',
      '2003–2007 Australia',
      '2011–2015 Australia'
    ];

    const economy = [4.707692308, 4.200230592, 5.753849799, 4.712671756, 5.591523895, 4.826134655, 5.161841264];
    const strikeRate = [27.33443709, 29.99423631 , 35.02904564, 28.23275862, 31.40530973, 32.17124183, 34.37676609];
    const average = [21.44701987, 20.99711816, 33.59197787, 22.17528736, 29.26725664, 25.87712418, 29.57456829];

    const metrics = [
      { name: 'Economy', data: economy },
      { name: 'Strike Rate', data: strikeRate },
      { name: 'Average', data: average }
    ];

    function normalizeWithPadding(arr, scaleMax = 90, padding = 0.1) {
      const min = Math.min(...arr);
      const max = Math.max(...arr);
      const range = max - min;
      const paddedMin = min - range * padding;
      const paddedMax = max + range * padding;
      return arr.map(v => ((v - paddedMin) / (paddedMax - paddedMin)) * scaleMax);
    }

    const normalizedData = metrics.map(m => normalizeWithPadding(m.data));

    const colors = [
      '#1f77b4', '#ff7f0e', '#2ca02c', '#d62728',
      '#9467bd', '#8c564b', '#e377c2'
    ];

    const radarData = {
      labels: metrics.map(m => m.name),
      datasets: bowlers.map((b, i) => ({
        label: b,
        data: normalizedData.map(m => m[i]),
        fill: true,
        backgroundColor: colors[i] + '55',
        borderColor: colors[i],
        borderWidth: 2,
        pointRadius: 4,
        pointBackgroundColor: colors[i]
      }))
    };

    const radarConfig = {
      type: 'radar',
      data: radarData,
      options: {
        responsive: true,
        maintainAspectRatio: true,
        layout: { padding: { top: 5, bottom: 0 } },
        scales: {
          r: {
            min: 0,
            max: 90,
            ticks: { display: false },
            grid: { color: 'rgba(0,0,0,0.1)' },
            angleLines: { color: '#888' },
            pointLabels: { font: { size: 14, weight: 'bold' } }
          }
        },
        plugins: {
          legend: { position: 'top' },
          title: {
            display: true,
            text: 'Opposition relative strike rate, economy and average of select teams',
            padding: { top: 5, bottom: 0 }
          }
        }
      }
    };

    new Chart(document.getElementById('radarChart'), radarConfig);
  </script>
</body>
</html>
