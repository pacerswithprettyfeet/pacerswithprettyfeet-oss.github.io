<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bowler Radar Chart</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      background-color: #f4f4f4;
      font-family: Arial, sans-serif;
    }
    body {
      text-align: center;
      box-sizing: border-box;
    }
    .chart-container {
      width: 95%;
      max-width: 700px;
      margin: 50px auto 20px auto;
    }
    canvas {
      width: 100% !important;
      height: auto !important;
      background: #ffffff;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 0 12px rgba(0,0,0,0.2);
      display: block;
    }
    p {
      font-size: 14px;
      color: #555;
      margin-top: 10px;
      max-width: 90%;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
</head>
<body>
  <div class="chart-container">
    <canvas id="radarChart"></canvas>
    <p>
      Opposition-relative strike rate is the difference in the rate in which a team loses 
      wickets and takes wickets. Similarly, opposition-relative economy and average is the 
      difference in the economy rates and the average of the opposition compared to the economy 
      and average of the team. The two Australian women teams outshine all teams from history in 
      terms of opposition-relative economy rates.
    </p>
  </div>

  <script>
    const bowlers = [
      '2022–2025 (women) Australia',
      '2017–2022 (women) Australia',
      '2015–2019 England',
      '2022–2025 (women) England',
      '2019–2023 India',
      '2003–2007 Australia',
      '2011–2015 Australia'
    ];

    const economy = [1.048, 1.338, 0.404, 1.030, 0.274, 0.266, 0.098];
    const strikeRate = [13.763, 23.162, 7.827, 8.399, 15.617, 12.779, 7.582];
    const average = [18.064, 28.375, 10.593, 12.770, 16.282, 12.576, 7.031];

    const metrics = [
      { name: 'Era-relative Economy', data: economy },
      { name: 'Era-relative Strike Rate', data: strikeRate },
      { name: 'Era-relative Average', data: average }
    ];

    function normalizeWithPadding(arr, scaleMax = 90, padding = 0.1) {
      const min = Math.min(...arr);
      const max = Math.max(...arr);
      const range = max - min;
      const paddedMin = min - range * padding;
      const paddedMax = max + range * padding;
      return arr.map(v => ((v - paddedMin) / (paddedMax - paddedMin)) * scaleMax);
    }

    const normalizedData = metrics.map(m => normalizeWithPadding(m.data));

    const colors = [
      '#1f77b4', '#ff7f0e', '#2ca02c', '#d62728',
      '#9467bd', '#8c564b', '#e377c2'
    ];

    const radarData = {
      labels: metrics.map(m => m.name),
      datasets: bowlers.map((b, i) => ({
        label: b,
        data: normalizedData.map(m => m[i]),
        fill: true,
        backgroundColor: colors[i] + '55',
        borderColor: colors[i],
        borderWidth: 2,
        pointRadius: 4,
        pointBackgroundColor: colors[i]
      }))
    };

    const radarConfig = {
      type: 'radar',
      data: radarData,
      options: {
        responsive: true,
        maintainAspectRatio: true,
        scales: {
          r: {
            min: 0,
            max: 90,
            ticks: { display: false },
            grid: { color: '#bbb' },
            angleLines: { color: '#888' },
            pointLabels: { font: { size: 13, weight: 'bold' } }
          }
        },
        plugins: {
          legend: { position: 'top' },
          title: {
            display: true,
            text: 'Opposition relative strike rate, economy and average of select teams'
          }
        }
      },
      plugins: [{
        id: 'axisNumbers',
        afterDraw: (chart) => {
          const { ctx, scales: { r } } = chart;
          const centerX = r.xCenter;
          const centerY = r.yCenter;
          const radius = r.drawingArea;

          ctx.save();
          ctx.fillStyle = '#333';
          ctx.font = '12px Arial';
          ctx.textAlign = 'center';

          metrics.forEach((m, i) => {
            const angle = (Math.PI * 2 / metrics.length) * i - Math.PI/2;
            const min = Math.min(...m.data);
            const max = Math.max(...m.data);
            for (let j = 1; j <= 5; j++) {
              const frac = j / 5;
              const value = min + frac * (max - min);
              const x = centerX + Math.cos(angle) * radius * frac;
              const y = centerY + Math.sin(angle) * radius * frac;
              ctx.fillText(value.toFixed(1), x, y);
            }
          });

          ctx.restore();
        }
      }]
    };

    new Chart(document.getElementById('radarChart'), radarConfig);
  </script>
</body>
</html>
